<!-- <!DOCTYPE html> -->
    <style type="text/css">
        .droot{
             width:100%;
             background:#f5f6fa;
             display:flex;          
             justify-content:center;
             align-items:center;         
                }
        .dsubdivision{
                       width:1100px;
                       height:auto;
                       background:#7f8fa6;
                       border-radius: 15px;                    
                       padding:15px;
                          }
        .dhead{
              font-size:20px;
              font-weight:bold;
              letter-spacing: 2px;
              color:#000;
              display:flex;
              align-items:center;
              
                         
   
                 }
        .tbtexthead{
            color: #FFFFFF;
            font-weight: bold;
            font-size: 24px;
        }
        .tbtext{
            color: #FFFFFF;
            font-weight: bold;
            font-size: 20px;

        }
        .root{
             width:100%;
             height:100vh;
             background:#f5f6fa;
             display:flex;          
             justify-content:center;
             align-items:center;         
                }
        .subdivision{
                       width:1100px;
                       height:auto;
                       background:#7f8fa6;
                       border-radius: 15px;                    
                       padding:15px;
                          }
        .head{
              font-size:20px;
              font-weight:bold;
              letter-spacing: 2px;
              color:#FFF;
              display:flex;
              align-items:center;
                         
   
                 }
        
                      
    </style>            
<html lang="en">
  <head>
    <meta charset="UTF-8">
            <title>Specialization</title>
            <!-- Font Awesome -->
            <link 
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
            rel="stylesheet"
            />
            <!-- Google Fonts -->
            <link
            href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
            rel="stylesheet"
            />
            <!-- MDB -->
            <link
            href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.10.2/mdb.min.css"
            rel="stylesheet"
            />
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        </head>
        <body>
            <div class="root">
                <div class="subdivision">
                    <div class="head" >
                       <div style="text-align:center;font-size:36px;margin-left:2px;font-weight:bold;">List Specialization</div>
                    </div>
                    
            
            <table class="table align-middle">
                <thead class="tbtexthead">
                  <tr>
                    
                    <th scope="col">ID</th>
                    <th scope="col">Catagory</th>
                    <th scope="col">Icon</th>
                    <th scope="col">Update</th>
                  </tr>
                </thead>
                <tbody class="tbtext">
                    
                    {% for row in result %}
                    <tr>
                    <th scope="row">{{row.specializationid }}</th>
                    <td>{{row.specialization}}</td>
                    <td>
                    <button type="button" specializationid={{ row.specializationid }} iconspl={{ row.icon }} class="btnicon  btn-light btn-sm px-3" data-mdb-toggle="modal"  data-mdb-target="#iconModal">
                    <img 
                    src="/static/{{row.icon}}"
                    class="img-fluid rounded"
                    style="width: 70px;"
                    />
                    </button>            
                  </td>
                    <td>
                        <button type="button" specializationid={{ row.specializationid }} specialization={{ row.specialization }} class="btnedit btn-light btn-sm px-3" data-mdb-toggle="modal" data-mdb-target="#exampleModal">
                          <i class="fas fa-edit"></i>
                        </button>
                        
                    </td>
                  </tr>                  
                    {% endfor %}                
                </tbody>
              </table>
             
                </div>
              </div>
              </div>
               <!--Dialog -->
               <!--model -->
               
 <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog model-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">        
          <div class="modal-title dhead" id="exampleModalLabel">
          <span><img src="/static/logo1.png" width="60px"></span>
          <span style="padding-left:10px;"> Specialization Register </span>
       </div>
        <button type="button" class="btn-close" data-mdb-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        
<div class=droot>
   <div class=dsubdivision>
         
         <div class="row" style="margin-top:4px;">
            <div class="col-12">
                <div class="form-outline form-white"> 
                  <input type="text" name="specializationid" id="splid" class="form-control form-control-lg" />
                  <label class="form-label" for="spl">Specialization Id</label>
                </div>
                
            </div>
         </div>
         <div class="row" style="margin-top:10px;">
          <div class="col-12">
              <div class="form-outline form-white" style="margin-top:10px;"> 
                <input type="text" name="specialization" id="spl" class="form-control form-control-lg" />
                <label class="form-label" for="spl">catagory Specialization </label>
              </div>
              
          </div>
       </div>
       
            
         <div class="row" style="margin-top:10px;">
            <div class="col-6">
               <button type="button" style="width:100%;" class="updbtn btn-light btn-lg" data-mdb-ripple-color="dark">UPDATE CATAGORY</button>
            </div>
            <div class="col-6">
              <button type="button" style="width:100%;" class="delbtn btn-light btn-lg" data-mdb-ripple-color="dark">REMOVE CATAGORY</button>
           </div>
          
           
         </div>
         <div class="row" style="margin-top:4px;">
            <div style="text-align:center; color:#fff; font-size:18px;" id="msg" class="col-12" >
            
            </div>
         </div> 
             

                               
   </div>

      </div>
      </div>
  </div>
</div>
</div>
<!--Dialog -->
<!--icon model -->
<div class="modal fade" id="iconModal" tabindex="-1" aria-labelledby="iconModalLabel" aria-hidden="true">
  <div class="modal-dialog model-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">        
          <div class="modal-title dhead" id="iconModalLabel">
          <span><img src="/static/logo1.png" width="60px"></span>
          <span style="padding-left:10px;"> Specialization Register </span>
       </div>
        <button type="button" class="btn-close" data-mdb-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" style="display:flex; align-items:center; justify-content:center;flex-direction:column;">
        
<div class=droot>
  <div class=dsubdivision>           
            <div class="row" style="margin-top:4px;">
               <div class="col-12">
                   <div class="form-outline form-white"> 
                     <input type="text" name="specializationid" id="idspl" class="form-control form-control-lg" />
                     <label class="form-label" for="spl">Specialization Id</label>
                   </div>
                   
               </div>
            </div>
   
        <div class="row" style="margin-top:10px;">
          <div class="col-6">
        
        <img 
        id="splicon"
        class="rounded-3"
        style="width:100%;"
        alt="Avatar"        
        /></div>
        <div class="col-6">
        
          <img 
          src="/static/edit.jpg"
          id="editicon"
          class="rounded-3"
          style="width:100%;" 
          alt="Avatar"
          /></div>
        </div>  
        <div class="row" style="margin-top:10px;">
          <div class="col-12">
              
                <input name="icon" class="form-control form-white form-control-lg" id="icon" type="file"/>
             
          </div>
       </div> 
       <div class="row" style="margin-top:10px;">
        <div class="col-12">
           <button type="button" style="width:100%; font-weight:bold;" class="updiconbtn btn-light btn-lg" data-mdb-ripple-color="dark">UPDATE ICON</button>
        </div>
        </div> 
        <div class="row" style="margin-top:4px;">
          <div style="text-align:center; color:#fff; font-size:18px;" id="iconmsg" class="col-12" >
          
          </div>
       </div> 
       
         
       </div>
       </div>  
        
          </div>
        </div>

      </div>    
<script>
$('.btnedit').click(function(){
$('#exampleModal').modal('show');
$('#spl').val($(this).attr('specialization'));
$('#splid').val($(this).attr('specializationid'));
})
$('.updbtn').click(function(){
  $.getJSON('updatespecialization/',{'specializationid':$('#splid').val(),'specialization':$('#spl').val()},function(data)
  {
    if(data.result)
    {
      $('#msg').html("Record Updated Successfully")}
    else{
      $('#msg').html("Fail to Update Record...")

    }


})
})
$('.delbtn').click(function(){
  $.getJSON('deletespecialization/',{'specializationid':$('#splid').val()},function(data)
  {
    if(data.result)
    {
      $('#msg').html("Record Removed Successfully")}
    else{
      $('#msg').html("Fail to Remove Record...")

    }


})
})
$('.btn-close').click(function(){
  location.href="http://localhost:8000/specializationdisplay"
   

})
$('.btnicon').click(function(){
  $('#exampleModal').modal('hide');
  $('#iconModal').modal('show');
  $('#idspl').val($(this).attr('specializationid'))
  $('#splicon').attr("src","/static/"+$(this).attr('iconspl'))
})
$('#icon').change(function(event){
  $('#editicon').attr("width","100%;")
  $('#editicon').attr("src",URL.createObjectURL(event.target.files[0]) )


})
$('.updiconbtn ').click(function(e){
  var formData=new FormData();
  formData.append("specializationid",$('#idspl').val())
  var files=$('#icon')[0].files;
  if(files.length>0){
    formData.append('icon',files[0]);
    $.ajax({
      url:'/editspecialization',
      type:'post',
      headers:{
        "X-CSRFToken": '{{ csrf_token }}'
      },
      data:formData,    
      contentType: false,
      processData: false,
      success:function(response){
        if(response!=0){         
    if(response.result)
    { 
      
      $('#iconmsg').html("ICON Updated Successfully")}
    else{
      $('#iconmsg').html("Fail to Update ICON...")

    }
        }else{
          alert('file not uploaded');
        }
      },
      });
  }else{
    alert("please select a file.");
  }
  });



</script>


<script
type="text/javascript"
src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.10.2/mdb.min.js"
>
</script>      
                
        </body>
          </html>